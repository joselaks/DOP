<UserControl
    x:Class="DataObra.Interfaz.Componentes.xPrecios"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sfSkinManager="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    d:DesignHeight="450"
    d:DesignWidth="800"
    sfSkinManager:SfSkinManager.VisualStyle="MaterialLight"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>

        <StackPanel
            Grid.Column="1"
            VerticalAlignment="Center"
            Orientation="Horizontal">
            <Image
                Width="28"
                Height="28"
                Margin="0,0,8,0"
                Source="pack://application:,,,/Imagenes/Material.png" />
            <TextBlock
                VerticalAlignment="Center"
                FontSize="22"
                FontWeight="Bold"
                Foreground="#43A047"
                Text="Precios" />
        </StackPanel>

        <syncfusion:TabControlExt
            Name="zona10"
            Grid.Row="1"
            Margin="15"
            TabItemSelectedForeground="Black">
            <syncfusion:TabItemExt Header="Buscar precios">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            FontWeight="DemiBold">
                            Busqueda de Artículos
                        </TextBlock>
                        <TextBlock VerticalAlignment="Center">Filtro:</TextBlock>
                        <TextBox
                            x:Name="txtBusquedaArticulo"
                            Width="200"
                            Margin="0,0,10,0"
                            VerticalAlignment="Center" />
                        <ComboBox
                            x:Name="comboTipoArticulo"
                            Width="180"
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            SelectedIndex="0">
                            <ComboBoxItem Content="Materiales" />
                            <ComboBoxItem Content="Mano de Obra" />
                            <ComboBoxItem Content="Equipos" />
                            <ComboBoxItem Content="Subcontratos" />
                            <ComboBoxItem Content="Otros" />
                        </ComboBox>
                        <Button
                            Width="80"
                            Click="BtnBuscarPrecios_Click"
                            Content="Buscar" />
                    </StackPanel>
                    <syncfusion:SfDataGrid
                        x:Name="gridBusquedaArticulos"
                        Grid.Row="1"
                        Margin="0,0,0,0"
                        AutoGenerateColumns="False"
                        IsReadOnly="True"
                        ItemsSource="{Binding ArticulosBusqueda}">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn
                                Width="250"
                                HeaderText="Descripción"
                                MappingName="Descrip" />
                            <syncfusion:GridTextColumn
                                Width="80"
                                HeaderText="Unidad"
                                MappingName="Unidad" />
                            <syncfusion:GridNumericColumn
                                Width="120"
                                HeaderText="Precio"
                                MappingName="Precio"
                                NumberDecimalDigits="2"
                                NumberDecimalSeparator=","
                                NumberGroupSeparator="."
                                NumberGroupSizes="3"
                                TextAlignment="Right" />
                            <syncfusion:GridTextColumn
                                Width="180"
                                HeaderText="Lista"
                                MappingName="ListaDescrip" />
                            <syncfusion:GridDateTimeColumn
                                Width="120"
                                CustomPattern="dd/MM/yyyy"
                                HeaderText="Fecha"
                                MappingName="Fecha"
                                Pattern="ShortDate"
                                TextAlignment="Center" />
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>
                </Grid>
            </syncfusion:TabItemExt>
            <syncfusion:TabItemExt Header="Ver listas">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <StackPanel
                        Grid.Row="0"
                        Margin="10"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            Text="Seleccionar lista:" />
                        <ComboBox
                            x:Name="comboListasVer"
                            Width="180"
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            DisplayMemberPath="Descrip"
                            ItemsSource="{Binding InfoCombo}"
                            SelectedIndex="0"
                            SelectedValuePath="ID" />
                        <Button
                            Width="100"
                            Margin="10,0,0,0"
                            HorizontalAlignment="Left"
                            Click="BtnBuscarLista_Click"
                            Content="Buscar" />
                    </StackPanel>

                    <syncfusion:SfDataGrid
                        x:Name="GrillaArticulosLista"
                        Grid.Row="2"
                        Margin="10"
                        AllowResizingColumns="True"
                        AutoGenerateColumns="False"
                        IsReadOnly="True">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn
                                Width="120"
                                HeaderText="Código"
                                MappingName="Codigo" />
                            <syncfusion:GridTextColumn
                                Width="300"
                                HeaderText="Descripción"
                                MappingName="Descrip" />
                            <syncfusion:GridTextColumn
                                Width="80"
                                HeaderText="Unidad"
                                MappingName="Unidad" />
                            <syncfusion:GridNumericColumn
                                Width="120"
                                HeaderText="Precio"
                                MappingName="Precio"
                                NumberDecimalDigits="2"
                                NumberDecimalSeparator=","
                                NumberGroupSeparator="."
                                NumberGroupSizes="3"
                                TextAlignment="Right" />
                            <syncfusion:GridDateTimeColumn
                                Width="120"
                                CustomPattern="dd/MM/yyyy"
                                HeaderText="Fecha"
                                MappingName="Fecha"
                                Pattern="ShortDate"
                                TextAlignment="Center" />
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>
                </Grid>
            </syncfusion:TabItemExt>
            <syncfusion:TabItemExt Header="Administrar">
                <Grid x:Name="adminPrecios">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                        <!--  Nueva fila para el botón  -->
                    </Grid.RowDefinitions>

                    <!--  Fila con ComboBox de selección  -->
                    <StackPanel
                        Grid.Row="0"
                        Margin="10"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            Text="Seleccionar categoría:" />
                        <ComboBox
                            x:Name="comboListas"
                            Width="200"
                            Margin="0,0,10,0"
                            VerticalAlignment="Center"
                            DisplayMemberPath="Descrip"
                            ItemsSource="{Binding InfoCombo}"
                            SelectedIndex="0"
                            SelectedValuePath="ID" />
                        <Button
                            Width="100"
                            Margin="0,0,10,0"
                            Click="NuevaLista_Click"
                            Content="Nueva lista" />
                        <Button
                            Width="80"
                            Click="BorrarListaClick"
                            Content="Borrar" />

                    </StackPanel>

                    <!--  Zona de drop para Excel  -->
                    <Border
                        Grid.Row="1"
                        Margin="10"
                        AllowDrop="True"
                        Background="#FFEFF6FB"
                        BorderBrush="#004482"
                        BorderThickness="2"
                        CornerRadius="8"
                        DragEnter="ExcelDropZone_DragEnter"
                        DragLeave="ExcelDropZone_DragLeave"
                        Drop="ExcelDropZone_Drop"
                        MouseLeftButtonUp="ExcelDropZone_MouseLeftButtonUp">
                        <StackPanel
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            AllowDrop="True">
                            <TextBlock
                                Margin="0,10"
                                HorizontalAlignment="Center"
                                FontSize="16"
                                Foreground="#004482"
                                Text="Arrastra aquí una planilla Excel (.xlsx)" />
                            <TextBlock
                                HorizontalAlignment="Center"
                                FontSize="12"
                                Foreground="Gray"
                                Text="o haz clic para seleccionar un archivo" />
                        </StackPanel>
                    </Border>

                    <!--  Botón grande y centrado  -->
                    <Button
                        Grid.Row="2"
                        Width="200"
                        Height="40"
                        Margin="0,20,0,20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Background="#004482"
                        Click="ProcesarListaArticulos"
                        Content="Procesar"
                        FontSize="22"
                        FontWeight="Bold"
                        Foreground="White" />
                </Grid>

            </syncfusion:TabItemExt>
        </syncfusion:TabControlExt>
        <Button
            Grid.Row="2"
            Width="200"
            Height="30"
            Click="Button_Click"
            Content="Volver a menú principal" />
        <!--  Aquí puedes agregar el contenido expandido de Precios  -->
    </Grid>
</UserControl>
