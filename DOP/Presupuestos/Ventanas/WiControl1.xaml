<syncfusion:RibbonWindow
    x:Class="DataObra.Presupuestos.Ventanas.WiControl1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:clases="clr-namespace:DataObra.Interfaz.Clases"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DataObra.Presupuestos.Ventanas"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    Title="Control"
    Width="1250"
    Height="800"
    Office2010Icon="pack://application:,,,/Imagenes/DataObra.ico"
    TitleTextAlignment="Left"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">
    <syncfusion:RibbonWindow.Resources>

        <clases:NumerosRojos x:Key="converter" />
        <local:UnidadGlOcultaConverter x:Key="unidadGlOcultaConverter" />
        <clases:PrRealMayorAProyectadoConverter x:Key="prRealMayorAProyectadoConverter" />

        <!--  Otros estilos  -->
        <Style x:Key="sinAsignar" TargetType="syncfusion:TreeGridRowControl">
            <Style.Triggers>
                <DataTrigger Binding="{Binding imprevisto}" Value="True">
                    <Setter Property="FontStyle" Value="Italic" />
                    <Setter Property="Foreground" Value="#FF888888" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </syncfusion:RibbonWindow.Resources>

    <Grid x:Name="gridBase">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="0" />
            <ColumnDefinition Width="0" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <syncfusion:Ribbon BackStageHeader="" IsBackStageVisible="False">
            <syncfusion:RibbonTab Caption="INICIO" IsChecked="True">
                <syncfusion:RibbonBar
                    Name="New"
                    Header="Guardar"
                    IsLauncherButtonVisible="False">
                    <syncfusion:RibbonButton
                        x:Name="BrnGuardar"
                        Click="BrnGuardar_Click"
                        Label="Guardar"
                        LargeIcon="pack://application:,,,/Imagenes/Guardar48.png"
                        SizeForm="Large" />
                    <syncfusion:RibbonButton
                        x:Name="BtnGuardarSalir"
                        Click="BtnGuardarSalir_Click"
                        Label="Guardar y Salir"
                        LargeIcon="pack://application:,,,/Imagenes/GuardarSalir.png"
                        SizeForm="Large" />
                    <syncfusion:RibbonButton
                        x:Name="BtnSalir"
                        Click="BtnSalir_Click"
                        Label="Salir sin cambios"
                        LargeIcon="pack://application:,,,/Imagenes/Salir.png"
                        SizeForm="Large" />
                </syncfusion:RibbonBar>
                <syncfusion:RibbonBar Header="Informes">
                    <syncfusion:RibbonButton
                        x:Name="SaleExcel"
                        Click="SaleExcel_Click"
                        Label="Excel"
                        SizeForm="Small"
                        SmallIcon="pack://application:,,,/Imagenes/Tarea.png" />
                </syncfusion:RibbonBar>
            </syncfusion:RibbonTab>
        </syncfusion:Ribbon>

        <!--  FILA INFERIOR  -->
        <Grid x:Name="gridInsumos" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <syncfusion:SfTreeGrid
                x:Name="grillaListados"
                AllowDraggingRows="True"
                AllowDrop="True"
                AllowEditing="True"
                AllowResizingColumns="True"
                AutoGenerateColumns="False"
                ExpanderColumn="Descripcion"
                RowStyle="{StaticResource sinAsignar}"
                SelectionChanged="grillaListados_SelectionChanged"
                SelectionMode="Single">


                <syncfusion:SfTreeGrid.StackedHeaderRows>
                    <syncfusion:StackedHeaderRow>
                        <syncfusion:StackedHeaderRow.StackedColumns>
                            <syncfusion:StackedColumn ChildColumns="CanTotalEjec,CantTotalReal,CanTotalSaldo" HeaderText="Cantiades" />
                            <syncfusion:StackedColumn ChildColumns="PrEjec,PrReal" HeaderText="Precio Unitario" />
                            <syncfusion:StackedColumn ChildColumns="ImporteTotalEjec" HeaderText="Total Previsto" />
                            <syncfusion:StackedColumn ChildColumns="ImporteRealEjec" HeaderText="Total Real" />
                            <syncfusion:StackedColumn ChildColumns="ImporteSaldoEjec" HeaderText="Total Disponible" />
                        </syncfusion:StackedHeaderRow.StackedColumns>
                    </syncfusion:StackedHeaderRow>
                </syncfusion:SfTreeGrid.StackedHeaderRows>

                <syncfusion:SfTreeGrid.Columns>


                    <syncfusion:TreeGridTextColumn
                        Width="50"
                        HeaderText="ID"
                        MappingName="ConceptoID" />


                    <syncfusion:TreeGridTextColumn Width="250" MappingName="Descrip" />

                    <syncfusion:TreeGridTextColumn
                        Width="50"
                        HeaderText="U.D."
                        MappingName="Unidad" />


                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Prevista"
                        MappingName="CanTotalEjec"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />

                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Real"
                        MappingName="CantTotalReal"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />
                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Disponible"
                        MappingName="CanTotalSaldo"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3">
                        <syncfusion:TreeGridNumericColumn.CellStyle>
                            <Style TargetType="syncfusion:TreeGridCell">
                                <Setter Property="Foreground" Value="{Binding Path=CanTotalSaldo, Converter={StaticResource converter}}" />
                            </Style>
                        </syncfusion:TreeGridNumericColumn.CellStyle>
                    </syncfusion:TreeGridNumericColumn>


                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Previsto"
                        MappingName="PrEjec"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />

                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Real"
                        MappingName="PrReal"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3">
                        <syncfusion:TreeGridNumericColumn.CellStyle>
                            <Style TargetType="syncfusion:TreeGridCell">
                                <Setter Property="Foreground" Value="{Binding Path=DataContext, RelativeSource={RelativeSource Self}, Converter={StaticResource prRealMayorAProyectadoConverter}}" />
                            </Style>
                        </syncfusion:TreeGridNumericColumn.CellStyle>
                    </syncfusion:TreeGridNumericColumn>

                    <syncfusion:TreeGridNumericColumn
                        x:Name="colImportePrevisto"
                        Width="130"
                        MappingName="ImporteTotalEjec"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />

                    <syncfusion:TreeGridNumericColumn
                        x:Name="colImporteReal"
                        Width="130"
                        MappingName="ImporteRealEjec"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />


                    <syncfusion:TreeGridNumericColumn
                        x:Name="colImporteSaldo"
                        MappingName="ImporteSaldoEjec"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3">
                        <syncfusion:TreeGridNumericColumn.CellStyle>
                            <Style TargetType="syncfusion:TreeGridCell">
                                <Setter Property="Foreground" Value="{Binding Path=ImporteSaldoEjec, Converter={StaticResource converter}}" />
                            </Style>
                        </syncfusion:TreeGridNumericColumn.CellStyle>

                    </syncfusion:TreeGridNumericColumn>



                </syncfusion:SfTreeGrid.Columns>

            </syncfusion:SfTreeGrid>

            <syncfusion:SfGridSplitter
                x:Name="sepDetalle"
                Grid.Row="1"
                Grid.Column="0"
                Height="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top"
                EnableCollapseButton="True"
                ResizeBehavior="PreviousAndNext"
                ShowsPreview="True" />

            <syncfusion:SfTreeGrid
                x:Name="grillaGastos"
                Grid.Row="2"
                syncfusion:SfSkinManager.VisualStyle="Metro"
                AllowDraggingRows="True"
                AllowDrop="True"
                AllowEditing="True"
                AllowResizingColumns="True"
                AutoGenerateColumns="False"
                ExpanderColumn="Descripcion"
                SelectionMode="Single">

                <syncfusion:SfTreeGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Ver documento" Click="VerDocumento_Click"/>
                    </ContextMenu>
                </syncfusion:SfTreeGrid.ContextMenu>
                
                <syncfusion:SfTreeGrid.Columns>
                    
                    <syncfusion:TreeGridTextColumn
                        Width="50"
                        HeaderText="ID"
                        MappingName="ID" />
                    <syncfusion:TreeGridTextColumn
                        Width="250"
                        HeaderText="Descripción"
                        MappingName="Descrip" />
                    <syncfusion:TreeGridTextColumn
                        Width="50"
                        HeaderText="UD"
                        MappingName="Unidad" />
                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Cantidad"
                        MappingName="Cantidad"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />
                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Factor"
                        MappingName="FactorConcepto"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />
                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="P.U."
                        MappingName="PrecioUnitario"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />
                    <syncfusion:TreeGridNumericColumn
                        Width="90"
                        HeaderText="Importe"
                        MappingName="Importe"
                        NumberDecimalDigits="2"
                        NumberDecimalSeparator=","
                        NumberGroupSeparator="."
                        NumberGroupSizes="3" />
                    <syncfusion:TreeGridTextColumn
                        Width="50"
                        HeaderText="Moneda"
                        MappingName="Moneda" />


                </syncfusion:SfTreeGrid.Columns>

            </syncfusion:SfTreeGrid>

        </Grid>






    </Grid>
</syncfusion:RibbonWindow>
